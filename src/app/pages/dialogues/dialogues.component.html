<div *ngIf="dialogues && dialogues.length && loggedUser" class="dialogues_wrapper">


  <div class="dialogues">
    <div class="dialogues_list">
      <div class="dialogues_number">
        {{dialogues.length}} диалога
      </div>

      <div *ngFor="let dialogue of dialogues" class="dialogues_item" [ngClass]="{'active':dialogue.active}" (click)="setActiveDialogue(dialogue._id.toString())">
        <a routerLink="{{dialogue._id}}">
          <div *ngFor="let user of dialogue.users">
          <div *ngIf="user._id !== loggedUser._id" class="dialogue_link">
            <div class="user">
              <div class="user_avatar" [ngStyle]="{background: 'url(' + url + user.avatar.filename + ')', 'background-size': 'cover'} ">

              </div>
              <div class="user_info">
                <span>{{user.name | titlecase}} {{user.surname | titlecase}}</span>
                <div class="last-message">{{dialogue.lastMessage.message}}</div>
              </div>

            </div>

            <div class="date">{{dialogue.lastMessage.date | date: 'd MMMM'}}</div>
          </div>
        </div>
        </a>
      </div>
    </div>
  </div>

  <div class="dialogue" >
    <router-outlet></router-outlet>
  </div>


</div>
